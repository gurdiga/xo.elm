<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>XO</title>
		<script src="vendor/quill/quill.min.js"></script>
		<link href="vendor/quill/quill.snow.css" rel="stylesheet"/>
		<link href="vendor/quill/quill.bubble.css" rel="stylesheet"/>
	</head>
	<body>
		<div id="main"></div>

		<div id="rich-text-editor"></div>
		<script>
			var quill = new Quill('#rich-text-editor', {
				modules: {
					toolbar: [
						[{ header: [1, 2, false] }],
						['bold', 'italic', 'underline'],
						['image', 'code-block']
					]
				},
				// scrollingContainer: '#scrolling-container', 
				placeholder: 'Compose an epic...',
				theme: 'bubble'
			});
		</script>

		<div id="editor" style="display: none">
			The editor:
			<textarea id="editor--field"></textarea>
			<button id="editor--button">Update</button>
		</div>

		<script src="dist/Main.js"></script>
		<script>
			var node = document.getElementById('main');
			var app = Elm.Main.embed(node);
			var editor = document.getElementById('editor');
			var editorField = document.getElementById('editor--field');

			app.ports.sendToEditor.subscribe(function(string) {
				console.log('got sendToEditor message with text', JSON.stringify(string));
				editor.style.display = 'block';
				editorField.value = string;
				editorField.focus();
			});

			document.getElementById('editor--button').addEventListener('click', function() {
				var string = editorField.value;

				console.log('sending receiveFromEditor message with text', JSON.stringify(string));
				app.ports.onResponseFromEditor.send(string);
				editor.style.display = 'none';
			});

		</script>
	</body>
</html>
